let currentUser = null;

document.getElementById("loginGoogle").onclick = () => {
  currentUser = { uid: "demo-user" };
  onLogin();
};

document.getElementById("loginGithub").onclick = () => {
  currentUser = { uid: "demo-user" };
  onLogin();
};

document.getElementById("logout").onclick = () => {
  currentUser = null;
  document.getElementById("dashboard").classList.add("hidden");
  document.getElementById("loginGoogle").classList.remove("hidden");
  document.getElementById("loginGithub").classList.remove("hidden");
  document.getElementById("logout").classList.add("hidden");
};

function onLogin() {
  document.getElementById("dashboard").classList.remove("hidden");
  document.getElementById("loginGoogle").classList.add("hidden");
  document.getElementById("loginGithub").classList.add("hidden");
  document.getElementById("logout").classList.remove("hidden");

  let wallet = localStorage.getItem("wallet_demo");
  if (!wallet) {
    wallet = "RTC-" + crypto.randomUUID().slice(0, 16);
    localStorage.setItem("wallet_demo", wallet);
    localStorage.setItem("balance_demo", "100");
    localStorage.setItem("price", "1");
  }

  document.getElementById("walletAddress").innerText = wallet;
  document.getElementById("balance").innerText =
    parseFloat(localStorage.getItem("balance_demo")).toFixed(4) + " RTC";
  document.getElementById("price").innerText =
    parseFloat(localStorage.getItem("price")).toFixed(2);
}

function showTab(tab) {
  ["wallet", "mining", "exchange"].forEach(t =>
    document.getElementById(t).classList.add("hidden")
  );
  document.getElementById(tab).classList.remove("hidden");
}
